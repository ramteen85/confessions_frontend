(function(t){function e(e){for(var a,i,c=e[0],r=e[1],u=e[2],d=0,h=[];d<c.length;d++)i=c[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&h.push(o[i][0]),o[i]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);l&&l(e);while(h.length)h.shift()();return n.push.apply(n,u||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],a=!0,c=1;c<s.length;c++){var r=s[c];0!==o[r]&&(a=!1)}a&&(n.splice(e--,1),t=i(i.s=s[0]))}return t}var a={},o={app:0},n=[];function i(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=a,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(s,a,function(e){return t[e]}.bind(null,a));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=r;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";var a=s("85ec"),o=s.n(a);o.a},"04e0":function(t,e,s){"use strict";var a=s("490c"),o=s.n(a);o.a},"388b":function(t,e,s){},"3bb7":function(t,e,s){"use strict";var a=s("6690"),o=s.n(a);o.a},4678:function(t,e,s){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function o(t){var e=n(t);return s(e)}function n(t){if(!s.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}o.keys=function(){return Object.keys(a)},o.resolve=n,t.exports=o,o.id="4678"},"490c":function(t,e,s){},5011:function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var a=s("2b0e"),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("Navbar"),s("router-view")],1)},n=[],i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("nav",{staticClass:"navbar nav-color"},[s("div",{staticClass:"container"},[s("a",{staticClass:"brand",attrs:{href:""}},[t._v("Confessions")]),s("ul",{staticClass:"menu"},[t.loggedin?t._e():s("li",{staticClass:"menu__item"},[s("router-link",{attrs:{to:"/register"}},[t._v("Register")])],1),t.loggedin?t._e():s("li",{staticClass:"menu__item"},[s("router-link",{attrs:{to:"/"}},[t._v("Login")])],1),t.loggedin?s("li",{staticClass:"menu__item mar-top",on:{click:t.toggleMessagesMenu}},[s("font-awesome-icon",{attrs:{icon:"envelope"}}),t.msgNumber>0?s("span",{staticClass:"badge"},[t._v(t._s(t.msgNumber))]):t._e(),s("div",{staticStyle:{position:"relative"}},[t.messageMenuShow?s("ul",{staticClass:"messages-menu"},[t.loggedin?s("li",{staticClass:"dropdown-menu__item messages-item"},[s("router-link",{attrs:{to:"#"}},[t._v("Go To Inbox")])],1):t._e(),t.loggedin?s("li",{staticClass:"dropdown-menu__item messages-item"},[s("router-link",{attrs:{to:"#"}},[t._v("Mark All As Read")])],1):t._e(),s("hr"),t._l(t.chatList,(function(e){return s("li",{key:e._id,staticClass:"dropdown-menu__item messages-item"},[t.loggedin?s("router-link",{attrs:{to:t.userId!==e.message[e.message.length-1].receiverId?"/inbox/"+e.message[e.message.length-1].receiverId:"/inbox/"+e.message[e.message.length-1].senderId}},[s("div",{staticClass:"messageColumn"},[s("img",{staticClass:"avatar",attrs:{src:"http://placehold.it/50x50",alt:""}})]),s("div",{staticClass:"messsageColumn"},[t.userId!==e.message[e.message.length-1].senderId?s("span",{staticClass:"nickname"},[t._v(t._s(e.message[e.message.length-1].senderName))]):t._e(),t.userId===e.message[e.message.length-1].senderId?s("span",{staticClass:"nickname"},[t._v(t._s(e.message[e.message.length-1].receiverName))]):t._e(),s("span",{staticClass:"messageText"},[t._v(t._s(e.message[e.message.length-1].body))])]),s("div",{staticClass:"messsageColumn"},[s("span",{staticClass:"date"},[t._v(t._s(t.timeAgo(e.message[e.message.length-1].createdAt)))]),e.message[e.message.length-1].isRead?t._e():s("font-awesome-icon",{attrs:{icon:"book-medical"}}),e.message[e.message.length-1].isRead?s("font-awesome-icon",{attrs:{icon:"envelope-open"}}):t._e()],1)]):t._e()],1)}))],2):t._e()])],1):t._e(),t.loggedin?s("li",{staticClass:"menu__item mar-top",on:{click:t.toggleMainMenu}},[s("font-awesome-icon",{attrs:{icon:"bars"}}),s("div",{staticStyle:{position:"relative"}},[t.mainMenuShow?s("ul",{staticClass:"dropdown-menu"},[t.loggedin?s("li",{staticClass:"dropdown-menu__item"},[s("router-link",{attrs:{to:"/members/closest"}},[t._v("Nearby")])],1):t._e(),t.loggedin?s("li",{staticClass:"dropdown-menu__item"},[s("router-link",{attrs:{to:"/members/latest"}},[t._v("Latest")])],1):t._e(),t.loggedin?s("li",{staticClass:"dropdown-menu__item"},[s("router-link",{attrs:{to:"/members/popular"}},[t._v("Popular")])],1):t._e(),t.loggedin?s("li",{staticClass:"dropdown-menu__item"},[s("router-link",{attrs:{to:"/members/hated"}},[t._v("Hated")])],1):t._e(),t.loggedin?s("li",{staticClass:"dropdown-menu__item",on:{click:t.logout}},[t._v("Logout")]):t._e()]):t._e()])],1):t._e()])])])])},c=[],r=(s("2ca0"),s("bc3a")),u=s.n(r),l=s("c1df"),d=s.n(l),h=s("2ef0"),m=s.n(h),f={name:"Navbar",data:function(){return{loggedin:!1,mainMenuShow:!1,messageMenuShow:!1,notificationMenuShow:!1,chatList:[],userId:"",msgNumber:0,insideInbox:!1,token:""}},methods:{getChatList:function(){var t=this;u.a.post("".concat("https://anonymous-confessions.herokuapp.com","/auth/getChatList"),{data:{token:this.token,id:this.userId}}).then((function(e){console.log(e),t.chatList=e.data.conversations,t.checkIfRead(e)})).catch((function(t){console.log(t)}))},logout:function(){localStorage.removeItem("jwt"),localStorage.removeItem("userId"),this.loggedin=!1,this.chatList=[],this.$router.push("/")},closeAllDropdowns:function(){this.mainMenuShow=!1,this.notificationMenuShow=!1,this.messageMenuShow=!1},toggleNotificationMenu:function(){this.mainMenuShow=!1,this.messageMenuShow=!1,this.notificationMenuShow=!this.notificationMenuShow},timeAgo:function(t){return d()(String(t)).startOf("hour").fromNow()},checkIfRead:function(t){var e=[];try{console.log(this.$router.app._route.path);for(var s=0;s<t.data.conversations.length;s++){var a=t.data.conversations[s].message[t.data.conversations[s].message.length-1];this.insideInbox||!1===a.isRead&&a.receiverId===this.userId&&(e.push(1),this.msgNumber=m.a.sum(e))}}catch(o){console.log(o)}},toggleMainMenu:function(){this.notificationMenuShow=!1,this.messageMenuShow=!1,this.mainMenuShow=!this.mainMenuShow},toggleMessagesMenu:function(){this.notificationMenuShow=!1,this.mainMenuShow=!1,this.messageMenuShow=!this.messageMenuShow}},watch:{$route:function(){localStorage.getItem("jwt")&&(this.loggedin=!0),this.loggedin&&(this.token=localStorage.getItem("jwt"),this.userId=localStorage.getItem("userId"),this.getChatList(),this.insideInbox=this.$router.app._route.path.startsWith("/inbox/".concat(this.userId))||this.$router.app._route.path.startsWith("/inbox/".concat(this.$route.params.id)))}},created:function(){var t=this;Bt.$on("userloggedin",(function(){t.loggedin=!0}))},mounted:function(){localStorage.getItem("jwt")&&(this.loggedin=!0),this.loggedin&&(this.token=localStorage.getItem("jwt"),this.userId=localStorage.getItem("userId"),this.getChatList(),this.insideInbox=this.$router.app._route.path.startsWith("/inbox/".concat(this.userId))||this.$router.app._route.path.startsWith("/inbox/".concat(this.$route.params.id)))}},g=f,p=(s("fdaa"),s("2877")),v=Object(p["a"])(g,i,c,!1,null,"7720d582",null),b=v.exports,C={name:"App",components:{Navbar:b}},_=C,k=(s("034f"),Object(p["a"])(_,o,n,!1,null,null,null)),w=k.exports,y=s("1dce"),j=s.n(y),$=s("8c4f"),I=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("h1",{staticClass:"login-title"},[t._v("Sign Into Your Account")]),s("form",{staticClass:"login"},[s("span",{staticClass:"errortext",staticStyle:{display:"flex","justify-content":"center","margin-top":"1.6em"}},[t._v(t._s(t.errorMsg))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.userData.email,expression:"userData.email"}],staticClass:"login-input",class:{invalidbox:t.$v.userData.email.$error},attrs:{type:"email",placeholder:"Email address"},domProps:{value:t.userData.email},on:{blur:function(e){return t.$v.userData.email.$touch()},input:function(e){e.target.composing||t.$set(t.userData,"email",e.target.value)}}}),!t.$v.userData.email.required&&t.$v.userData.email.$dirty?s("span",{staticClass:"errortext"},[t._v("* Email cannot be blank")]):t._e(),!t.$v.userData.email.email&&t.$v.userData.email.$dirty?s("span",{staticClass:"errortext"},[t._v("* Please enter a valid email")]):t._e(),s("input",{directives:[{name:"model",rawName:"v-model",value:t.userData.password,expression:"userData.password"}],staticClass:"login-input",class:{invalidbox:t.$v.userData.password.$error},attrs:{type:"password",placeholder:"Password"},domProps:{value:t.userData.password},on:{blur:function(e){return t.$v.userData.password.$touch()},input:function(e){e.target.composing||t.$set(t.userData,"password",e.target.value)}}}),!t.$v.userData.password.required&&t.$v.userData.password.$dirty?s("span",{staticClass:"errortext"},[t._v("* Please enter your password")]):t._e(),s("button",{staticClass:"login-button",attrs:{type:"submit"},on:{click:t.submitForm}},[t._v("Login")])])])},P=[],D=s("b5ae"),S={name:"Login",data:function(){return{errorMsg:"",userData:{email:"",password:""}}},validations:{userData:{email:{required:D["required"],email:D["email"]},password:{required:D["required"]}}},mounted:function(){localStorage.getItem("jwt")&&this.$router.push("/members/closest"),console.log("https://anonymous-confessions.herokuapp.com")},methods:{submitForm:function(t){var e=this;t.preventDefault();var s={email:this.userData.email,password:this.userData.password};this.$v.$invalid?(console.log("Invalid form. Cannot Submit..."),this.errorMsg="Invalid Form: Please Fill in all fields..."):u.a.post("".concat("https://anonymous-confessions.herokuapp.com","/auth/login"),{result:s}).then((function(t){localStorage.setItem("jwt",t.data.token),localStorage.setItem("userId",t.data.userId),console.log(t),Bt.$emit("userloggedin"),e.$router.push("/members/closest")})).catch((function(t){e.errorMsg=t.response.data.message}))}}},x=S,L=(s("db53"),Object(p["a"])(x,I,P,!1,null,"2aa7846e",null)),E=L.exports,M=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("h1",{staticClass:"register-title"},[t._v("Welcome")]),s("form",{staticClass:"register"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.userData.email,expression:"userData.email"}],staticClass:"register-input",class:{invalidbox:t.$v.userData.email.$error},attrs:{type:"email",placeholder:"Email address"},domProps:{value:t.userData.email},on:{input:[function(e){e.target.composing||t.$set(t.userData,"email",e.target.value)},function(e){return t.$v.userData.email.$touch()}]}}),!t.$v.userData.email.email&&t.$v.userData.email.$dirty?s("span",{staticClass:"errortext"},[t._v("* Please enter a valid Email.")]):t._e(),!t.$v.userData.email.required&&t.$v.userData.email.$dirty?s("span",{staticClass:"errortext"},[t._v("* Email cannot be blank")]):t._e(),s("input",{directives:[{name:"model",rawName:"v-model",value:t.userData.nickname,expression:"userData.nickname"}],staticClass:"register-input",attrs:{type:"text",name:"nickname",placeholder:"Enter a nickname (optional)"},domProps:{value:t.userData.nickname},on:{input:function(e){e.target.composing||t.$set(t.userData,"nickname",e.target.value)}}}),s("div",{staticClass:"register-switch"},[s("h3",[t._v("Gender")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.userData.gender,expression:"userData.gender"}],staticClass:"register-switch-input",attrs:{type:"radio",name:"gender",value:"",id:"other"},domProps:{checked:t._q(t.userData.gender,"")},on:{change:function(e){return t.$set(t.userData,"gender","")}}}),s("label",{staticClass:"register-switch-label",attrs:{for:"sex_f"}},[t._v("Other")]),"male"!==t.userData.gender&&"female"!==t.userData.gender?s("input",{directives:[{name:"model",rawName:"v-model",value:t.userData.gender,expression:"userData.gender"}],staticClass:"register-input",class:{invalidbox:t.$v.userData.gender.$error},attrs:{type:"text",name:"othervalue",placeholder:"Enter your gender..."},domProps:{value:t.userData.gender},on:{input:[function(e){e.target.composing||t.$set(t.userData,"gender",e.target.value)},function(e){return t.$v.userData.gender.$touch()}]}}):t._e(),!t.$v.userData.gender.required&&t.$v.userData.gender.$dirty?s("span",{staticClass:"errortext"},[t._v("* Please enter your gender")]):t._e(),s("br"),s("br"),s("input",{directives:[{name:"model",rawName:"v-model",value:t.userData.gender,expression:"userData.gender"}],staticClass:"register-switch-input",attrs:{type:"radio",name:"gender",value:"female",id:"female"},domProps:{checked:t._q(t.userData.gender,"female")},on:{change:function(e){return t.$set(t.userData,"gender","female")}}}),s("label",{staticClass:"register-switch-label",attrs:{for:"sex_f"}},[t._v("Female")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.userData.gender,expression:"userData.gender"}],staticClass:"register-switch-input",attrs:{type:"radio",name:"gender",value:"male",id:"male",checked:""},domProps:{checked:t._q(t.userData.gender,"male")},on:{change:function(e){return t.$set(t.userData,"gender","male")}}}),s("label",{staticClass:"register-switch-label",attrs:{for:"sex_m"}},[t._v("Male")]),s("br"),s("br")]),s("h3",[t._v("Date of Birth")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.userData.dob,expression:"userData.dob"}],staticClass:"register-input",class:{invalidbox:t.$v.userData.dob.$error},attrs:{type:"date",placeholder:"Date of Birth"},domProps:{value:t.userData.dob},on:{input:[function(e){e.target.composing||t.$set(t.userData,"dob",e.target.value)},function(e){return t.$v.userData.dob.$touch()}]}}),!t.$v.userData.dob.required&&t.$v.userData.dob.$dirty?s("span",{staticClass:"errortext"},[t._v("* Please enter your date of birth")]):t._e(),s("input",{directives:[{name:"model",rawName:"v-model",value:t.userData.password,expression:"userData.password"}],staticClass:"register-input",class:{invalidbox:t.$v.userData.password.$error},attrs:{type:"password",placeholder:"Password"},domProps:{value:t.userData.password},on:{input:[function(e){e.target.composing||t.$set(t.userData,"password",e.target.value)},function(e){return t.$v.userData.password.$touch()}]}}),!t.$v.userData.password.required&&t.$v.userData.password.$dirty?s("span",{staticClass:"errortext"},[t._v("* Please enter your password")]):t._e(),s("input",{directives:[{name:"model",rawName:"v-model",value:t.userData.confirmPassword,expression:"userData.confirmPassword"}],staticClass:"register-input",class:{invalidbox:t.$v.userData.confirmPassword.$error},attrs:{type:"password",placeholder:"Confirm Password"},domProps:{value:t.userData.confirmPassword},on:{input:[function(e){e.target.composing||t.$set(t.userData,"confirmPassword",e.target.value)},function(e){return t.$v.userData.confirmPassword.$touch()}]}}),!t.$v.userData.confirmPassword.required&&t.$v.userData.confirmPassword.$dirty?s("span",{staticClass:"errortext",staticStyle:{"margin-bottom":"0em",display:"block"}},[t._v("* Please confirm your password.")]):t._e(),!t.$v.userData.confirmPassword.sameAs&&t.$v.userData.confirmPassword.$dirty?s("span",{staticClass:"errortext"},[t._v("* Your Passwords must match!")]):t._e(),s("button",{staticClass:"register-button",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.submitForm(e)}}},[t._v("Register")]),1==t.submitted?s("span",{staticClass:"errortext",staticStyle:{display:"flex","justify-content":"center","margin-top":"1.6em"}},[t._v(t._s(t.errorMsg))]):t._e()])])},N=[],A={name:"Register",data:function(){return{submitted:!1,errorMsg:"",userData:{email:"",nickname:"",gender:"male",dob:"",password:"",confirmPassword:""}}},validations:{userData:{email:{required:D["required"],email:D["email"]},gender:{required:D["required"]},dob:{required:D["required"]},password:{required:D["required"]},confirmPassword:{required:D["required"],sameAs:Object(D["sameAs"])("password")}}},mounted:function(){localStorage.getItem("jwt")&&this.$router.push("/members/closest")},methods:{submitForm:function(){var t=this;this.submitted=!0;var e={email:this.userData.email,nickname:this.userData.nickname,password:this.userData.password,gender:this.userData.gender,dob:this.userData.dob};this.$v.$invalid?console.log("Invalid form. Cannot Submit..."):u.a.post("".concat("https://anonymous-confessions.herokuapp.com","/auth/register"),{result:e}).then((function(e){localStorage.setItem("jwt",e.data.token),localStorage.setItem("userId",e.data.userId),Bt.$emit("userloggedin"),t.$router.push("/members/closest")})).catch((function(e){console.log(e),t.errorMsg=e.response.data.data[0].msg}))}}},O=A,U=(s("04e0"),Object(p["a"])(O,M,N,!1,null,"1dd374ed",null)),T=U.exports,q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page"},[s("div",{staticClass:"sidebar"},[s("div",{staticClass:"block"},[s("button",{staticClass:"btn",on:{click:t.newConfession}},[t._v("Make a Confession")])]),s("div",{staticClass:"block"},[s("h2",[t._v("Find Confessions: ")]),s("p",[t._v("Within:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.distance,expression:"distance"}],staticClass:"distance",attrs:{type:"number",name:"distance"},domProps:{value:t.distance},on:{input:function(e){e.target.composing||(t.distance=e.target.value)}}}),t._v(" "),s("span",[t._v("Kms")]),s("button",{staticClass:"btn mar-btn",on:{click:t.saveDistance}},[t._v("Search")])])]),s("div",{staticClass:"main"},[s("h2",[t._v("Confessions Near You...")]),s("div",{staticClass:"deck"},t._l(t.confessions,(function(e){return s("div",{key:e._id,staticClass:"card"},[s("div",{staticClass:"cardbody"},[s("div",{staticClass:"linkto",on:{click:function(){return t.showConfession(e._id)}}},[t._m(0,!0),s("div",{staticClass:"card-title"},[s("p",[t._v(t._s(e.subject))])])])]),s("div",{staticClass:"card-panel"},[s("div",{staticClass:"nickname"},[t._v(" "+t._s(e.creator.nickname)+" ")]),s("div",{staticClass:"reacts"},[s("div",{staticClass:"reactbox",on:{click:function(){t.heartPost(e._id)}}},[s("div",{staticClass:"love"},[s("font-awesome-icon",{attrs:{icon:"heart"}})],1),s("span",[t._v(t._s(e.totalHearts))])]),s("div",{staticClass:"reactbox",on:{click:function(){t.hatePost(e._id)}}},[s("div",{staticClass:"hate"},[s("font-awesome-icon",{attrs:{icon:"hand-middle-finger"}})],1),s("span",[t._v(t._s(e.totalHates)+" ")])])]),s("div",{staticClass:"timestamp"},[t._v(" "+t._s(t.timeAgo(e.createdAt))+" ")])])])})),0),s("div",{staticClass:"pagination"},[s("div",{staticClass:"left"},[s("div",{staticClass:"arrow",on:{click:t.prevPage}},[t._v(" <<<< ")])]),s("div",{staticClass:"right"},[s("div",{staticClass:"arrow",on:{click:t.nextPage}},[t._v(" >>>> ")])])])])])},H=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-image-container"},[s("img",{staticClass:"card-img",attrs:{src:"https://www.bigstockphoto.com/blog/wp-content/uploads/2014/01/66006-bigstock-confession-concept-42406879.jpg",alt:""}})])}],R=(s("7db0"),{data:function(){return{confessions:[],lat:"",lng:"",country:"",countryCode:"",postcode:"",state:"",suburb:"",trueLoc:!1,loadConfessions:!1,distance:50,token:"",userId:"",page:1}},methods:{nextPage:function(){this.confessions.length<8||(this.page+=1),this.getConfessions()},prevPage:function(){1==this.page?this.page=1:this.page-=1,this.getConfessions()},messageUser:function(t){this.$router.push("/inbox/"+t)},showConfession:function(t){this.$router.push("/confessions/show/"+t)},heartPost:function(t){var e=this;u.a.post("".concat("https://anonymous-confessions.herokuapp.com","/confessions/heartPost"),{confData:{token:localStorage.getItem("jwt"),id:t}}).then((function(s){var a=e.confessions.find((function(e){return e._id===t}));a.totalHearts=s.data.hearts,a.totalHates=s.data.hates,e.$socket.emit("refresh")})).catch((function(t){console.log(t)}))},hatePost:function(t){var e=this;u.a.post("".concat("https://anonymous-confessions.herokuapp.com","/confessions/hatePost"),{confData:{token:localStorage.getItem("jwt"),id:t}}).then((function(t){console.log(t),e.$socket.emit("refresh")})).catch((function(t){console.log(t)}))},newConfession:function(){localStorage.getItem("jwt")?this.$router.push("/confessions/new"):this.$router.push("/")},timeAgo:function(t){return d()(String(t)).startOf("hour").fromNow()},getConfessions:function(){var t=this;u.a.post("".concat("https://anonymous-confessions.herokuapp.com","/confessions/closest"),{confData:{token:this.token,page:this.page}}).then((function(e){t.confessions=e.data.confessions,t.distance=e.data.distance})).catch((function(t){console.log(t)}))},saveDistance:function(){var t=this;this.page=1,u.a.post("".concat("https://anonymous-confessions.herokuapp.com","/confessions/closest/sd"),{token:this.token,distance:this.distance}).then((function(e){console.log(e),t.getConfessions()})).catch((function(t){console.log(t)}))},saveTrueLoc:function(){var t=this;u.a.post("".concat("https://anonymous-confessions.herokuapp.com","/auth/saveTrueUserLoc"),{data:{token:localStorage.getItem("jwt"),lat:this.lat,lng:this.lng}}).then((function(e){t.country=e.data.user.country,t.countryCode=e.data.user.countryCode,t.suburb=e.data.user.suburb,t.state=e.data.user.state,t.postcode=e.data.user.postcode,t.trueLoc=e.data.user.trueLoc})).then((function(){t.getConfessions()})).catch((function(t){console.log(t)}))},saveRoughLoc:function(){var t=this;console.log("saving rough loc..."),console.log("https://api.ipify.org"),u.a.get("https://api.ipify.org").then((function(t){return console.log("got rough ip!"),console.log(t),t})).then((function(e){console.log("ip: ",e.data),u.a.post("".concat("https://anonymous-confessions.herokuapp.com","/auth/saveRoughUserLoc"),{data:{token:localStorage.getItem("jwt"),ip:e.data}}).then((function(e){console.log(e),t.lat=e.data.user.location[1],t.lng=e.data.user.location[0],t.state=e.data.user.state,t.suburb=e.data.user.suburb,t.country=e.data.user.country,t.getConfessions()})).catch((function(e){console.log(e),t.unloadable=!0}))})).catch((function(t){console.log("geolocation failed"),console.log(t)}))}},mounted:function(){var t=this;this.token=localStorage.getItem("jwt"),this.userId=localStorage.getItem("userId"),this.token||this.$router.push("/"),this.$socket.on("refresh",(function(){t.getConfessions()})),u.a.post("".concat("https://anonymous-confessions.herokuapp.com","/auth/getUserLoc"),{data:{token:localStorage.getItem("jwt")}}).then((function(e){if(t.lat=e.data.locInfo.lat,t.lng=e.data.locInfo.lng,t.country=e.data.locInfo.country,t.countryCode=e.data.locInfo.countryCode,t.state=e.data.locInfo.state,t.suburb=e.data.locInfo.suburb,t.trueLoc=e.data.locInfo.trueLoc,t.postcode=e.data.locInfo.postcode,""!==t.lat&&""!==t.lng&&""!==t.country&&""!=t.state&&!0===t.trueLoc)t.getConfessions();else{var s={enableHighAccuracy:!1,timeout:1/0,maximumAge:0};t.$getLocation(s).then((function(e){t.lat=e.lat,t.lng=e.lng})).then((function(){t.saveTrueLoc()})).catch((function(e){console.warn(e),t.saveRoughLoc()}))}})).catch((function(t){console.log(""),console.log(t)}))}}),z=R,V=(s("f327"),Object(p["a"])(z,q,H,!1,null,"665fc3b4",null)),B=V.exports,G=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page"},[s("div",{staticClass:"main"},[s("div",{staticClass:"namePanel"},[s("h2",{staticClass:"user-heading"},[t._v(t._s(t.data.receiverName)+" (online)")])]),s("div",{staticClass:"messageContainer",attrs:{id:"messageContainer"}},[t._l(t.messagesArray,(function(e){return s("div",{key:e._id,staticClass:"msgWrapper"},[t.data.senderName!==t.data.receiverName&&t.data.senderName!==e.senderName?s("div",{staticClass:"message them"},[s("hgroup",{staticClass:"speech-bubble-yellow"},[s("p",[t._v(t._s(e.body))])])]):t._e(),t.data.senderName==e.senderName?s("div",{staticClass:"message you"},[s("hgroup",{staticClass:"speech-bubble-blue"},[s("p",[t._v(t._s(e.body))])])]):t._e()])})),!0===t.isTyping?s("div",{staticClass:"message them typing"},[t._v(" "+t._s(this.receiverName)+" is typing a message... ")]):t._e()],2),s("div",{staticClass:"sendMessage"},[s("form",{on:{submit:function(e){return t.sendMessage(e)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"messageInput",attrs:{type:"text",placeholder:"Type a message..."},domProps:{value:t.message},on:{input:[function(e){e.target.composing||(t.message=e.target.value)},t.sendTyping]}}),s("div",{staticClass:"emojiwrap"},[s("button",{staticClass:"btn emoji",attrs:{type:"button"},on:{click:function(e){t.emojiShow=!t.emojiShow}}},[t._v("😎")]),t.emojiShow?s("VEmojiPicker",{staticClass:"emojiPicker",on:{select:t.selectEmoji}}):t._e()],1),s("button",{staticClass:"btn send",attrs:{type:"submit"}},[t._v("Send Message")])])])])])},W=[],F=(s("99af"),{data:function(){return{message:"",userId:"",senderName:"",receiverName:"",receiverId:"",messagesArray:[],data:"",token:"",isTyping:!1,typingMessage:null,emojiShow:!1}},methods:{selectEmoji:function(t){this.message+=t.data},sendTyping:function(){var t=this,e={senderId:this.userId,receiverId:this.$route.params.id,senderName:this.senderName,receiverName:this.receiverName};this.$socket.emit("istyping",{userData:e}),this.typingMessage&&clearTimeout(this.typingMessage),this.typingMessage=setTimeout((function(){t.$socket.emit("stoptyping",{userData:e})}),500)},getAllMessages:function(t,e){var s=this;u.a.post("".concat("https://anonymous-confessions.herokuapp.com","/messages/get/").concat(t,"/").concat(e),{token:localStorage.getItem("jwt")}).then((function(t){console.log(t.data),s.senderName=t.data.senderName,s.receiverName=t.data.receiverName,s.data=t.data,s.messagesArray=t.data.messages.message})).catch((function(t){console.log(t)}))},scrollToEnd:function(){var t=this.$el.querySelector("#messageContainer");t.scrollTop=t.scrollHeight},sendMessage:function(t){var e=this;t.preventDefault(),this.message&&u.a.post("".concat("https://anonymous-confessions.herokuapp.com","/messages/send"),{convData:{senderId:this.userId,receiverId:this.$route.params.id,message:this.message,token:localStorage.getItem("jwt")}}).then((function(t){console.log("result: ",t),e.$socket.emit("addMessage",{}),e.scrollToEnd(),e.message=""})).catch((function(t){console.log(t)}))}},mounted:function(){var t=this;this.token=localStorage.getItem("jwt"),this.token||this.$router.push("/");var e=this.$route.params.id;this.userId=localStorage.getItem("userId"),this.getAllMessages(this.userId,e);var s={room1:this.userId,room2:this.$route.params.id};console.log("socket: ",this.$socket),this.$socket.emit("joinchat",{typingObject:s}),this.$socket.on("addMessage",(function(){t.userId===t.data.messages.sender?t.getAllMessages(t.data.messages.sender,t.data.messages.receiver):t.getAllMessages(t.data.messages.receiver,t.data.messages.sender)})),this.$socket.on("istyping",(function(e){e.userData.senderId!==t.userId&&(t.isTyping=!0)})),this.$socket.on("stoptyping",(function(e){e.userData.senderId!==t.userId&&(t.isTyping=!1)}))},watch:{"$route.params.id":function(t){var e=t;this.getAllMessages(this.userId,e);var s={room1:this.userId,room2:this.$route.params.id};console.log("socket: ",this.$socket),this.$socket.emit("joinchat",{typingObject:s})}},updated:function(){this.scrollToEnd()}}),K=F,Y=(s("3bb7"),Object(p["a"])(K,G,W,!1,null,"4a4cd576",null)),J=Y.exports,Q=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},X=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"map"},[s("h2",[t._v("Map")])])}],Z={name:"GMap",data:function(){return{}}},tt=Z,et=Object(p["a"])(tt,Q,X,!1,null,"00c1fb1e",null),st=et.exports,at=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page"},[s("div",{staticClass:"main"},[t._m(0),s("div",{staticClass:"section small"},[s("small",[t._v("Upload an image! this will be the image cover for your confession")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.imageUrl,expression:"imageUrl"}],attrs:{type:"text",placeholder:"image URL"},domProps:{value:t.imageUrl},on:{input:function(e){e.target.composing||(t.imageUrl=e.target.value)}}})]),s("div",{staticClass:"section small"},[s("small",[t._v("Please enter any related subject categories, separated by a comma (i.e: singles, political, etc)")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.categories,expression:"categories"}],staticClass:"categories",attrs:{type:"text",placeholder:"Please add categories separated by a comma"},domProps:{value:t.categories},on:{input:function(e){e.target.composing||(t.categories=e.target.value)}}})]),s("div",{staticClass:"section small"},[s("small",[t._v("Enter a subject for your confessions")]),s("small",[t._v("This will show up on the front page to intrigue your viewers - keep it short!")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.subject,expression:"subject"}],staticClass:"subject resize-none",attrs:{cols:"30",rows:"3",placeholder:"Enter Subject"},domProps:{value:t.subject},on:{input:[function(e){e.target.composing||(t.subject=e.target.value)},function(e){return t.$v.subject.$touch()}]}})]),s("div",{staticClass:"section large"},[s("small",[t._v("Enter a subject for your confessions")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.post,expression:"post"}],staticClass:"post resize-none",attrs:{cols:"90",rows:"10",placeholder:"Confess your sins..."},domProps:{value:t.post},on:{input:[function(e){e.target.composing||(t.post=e.target.value)},function(e){return t.$v.post.$touch()}]}})]),s("div",{staticClass:"section small"},[s("button",{staticClass:"btn",on:{click:t.postConfession}},[t._v("Confess")])])])])},ot=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"section heading"},[s("h1",[t._v("Create a confession")])])}],nt={data:function(){return{imageUrl:"",categories:"Anonymous, Private Thoughts",subject:"",post:"",token:""}},validations:{post:{required:D["required"]},subject:{required:D["required"]}},methods:{postConfession:function(){var t=this;this.$v.$invalid?console.log("Invalid form. Cannot Submit..."):u.a.post("".concat("https://anonymous-confessions.herokuapp.com","/confessions/new"),{confData:{imageUrl:this.imageUrl,categories:this.categories,subject:this.subject,post:this.post,token:this.token}}).then((function(e){console.log(e),t.$socket.emit("newconfession",{}),t.$router.push("/members/closest")})).catch((function(t){console.log(t)}))}},mounted:function(){this.token=localStorage.getItem("jwt"),this.token||this.$router.push("/")}},it=nt,ct=(s("fe37"),Object(p["a"])(it,at,ot,!1,null,"61d61227",null)),rt=ct.exports,ut=function(){var t=this,e=this,s=e.$createElement,a=e._self._c||s;return a("div",{staticClass:"page"},[a("div",{staticClass:"main"},[a("div",{staticClass:"section heading"},[a("h1",[e._v(e._s(this.subject))])]),a("div",{staticClass:"section post"},[a("div",[e._v(e._s(e.post))])]),e._m(0),a("div",{staticClass:"section small"},[a("div",{staticClass:"catwrapper"},[a("p",{staticClass:"categories",attrs:{placeholder:"Please add categories separated by a comma"}},[e._v(e._s(e.categories))])])]),a("div",{staticClass:"section panel-section"},[a("div",{staticClass:"post-panel"},[a("p",[e._v("Poster: "+e._s(this.creator))])]),a("div",{staticClass:"post-panel"},[a("div",{staticClass:"reactbtn",on:{click:function(){e.heartPost(t.id)}}},[a("div",{staticClass:"love"},[a("font-awesome-icon",{attrs:{icon:"heart"}})],1),a("span",[e._v(e._s(this.totalHearts))])])]),a("div",{staticClass:"post-panel"},[a("div",{staticClass:"reactbtn",on:{click:function(){e.hatePost(t.id)}}},[a("div",{staticClass:"hate"},[a("font-awesome-icon",{attrs:{icon:"hand-middle-finger"}})],1),a("span",[e._v(e._s(this.totalHates))])])])]),this.userId==this.creatorId?a("div",{staticClass:"section panel-section"},[a("div",{staticClass:"post-panel"},[a("div",{staticClass:"deleteBtn"},[a("button",{staticClass:"btn delete",on:{click:e.deleteConfession}},[e._v("Delete Confession")])])])]):e._e(),this.userId!==this.creatorId?a("div",{staticClass:"section panel-section"},[a("div",{staticClass:"post-panel"},[a("div",{staticClass:"deleteBtn"},[a("button",{staticClass:"btn delete",on:{click:e.messageUser}},[e._v("Message "+e._s(this.creator))])])])]):e._e(),this.userId!==this.creatorId?a("div",{staticClass:"section panel-section"},[a("div",{staticClass:"post-panel"},[a("p",{staticStyle:{"font-style":"italic"}},[e._v("User is about "+e._s(e.distance)+" km from you...")])])]):e._e()])])},lt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"section small"},[s("img",{attrs:{src:"https://www.bigstockphoto.com/blog/wp-content/uploads/2014/01/66006-bigstock-confession-concept-42406879.jpg",alt:""}})])}],dt={data:function(){return{imageUrl:"https://www.bigstockphoto.com/blog/wp-content/uploads/2014/01/66006-bigstock-confession-concept-42406879.jpg",categories:"Anonymous, Private Thoughts",subject:"",post:"",creator:"nickname",totalHearts:0,totalHates:0,token:"",userId:"",creatorId:"",id:"",distance:0}},validations:{post:{required:D["required"]},subject:{required:D["required"]}},methods:{deleteConfession:function(){var t=this;confirm("Do you really want to delete?")&&u.a.post("".concat("https://anonymous-confessions.herokuapp.com","/confessions/delete"),{confData:{token:this.token,id:this.id}}).then((function(e){console.log(e),t.$router.push("/")})).catch((function(t){console.log(t)}))},heartPost:function(t){var e=this;console.log(t),u.a.post("".concat("https://anonymous-confessions.herokuapp.com","/confessions/heartPost"),{confData:{token:this.token,id:t}}).then((function(t){console.log(t),e.totalHearts=t.data.confession.totalHearts,e.totalHates=t.data.confession.totalHates})).catch((function(t){console.log(t)}))},messageUser:function(){this.$router.push("/inbox/"+this.creatorId)},hatePost:function(t){var e=this;u.a.post("".concat("https://anonymous-confessions.herokuapp.com","/confessions/hatePost"),{confData:{token:localStorage.getItem("jwt"),id:t}}).then((function(t){console.log(t),e.totalHates=t.data.confession.totalHates,e.totalHearts=t.data.confession.totalHearts})).catch((function(t){console.log(t)}))},getConfession:function(){var t=this;u.a.post("".concat("https://anonymous-confessions.herokuapp.com","/confessions/post"),{confData:{token:this.token,id:this.$route.params.id}}).then((function(e){console.log(e),t.subject=e.data.confession.subject,t.categories=e.data.confession.categories[0],t.post=e.data.confession.content,t.creator=e.data.confession.creator.nickname,t.totalHearts=e.data.confession.totalHearts,t.totalHates=e.data.confession.totalHates,t.id=e.data.confession._id,t.creatorId=e.data.confession.creator._id,t.distance=parseInt(e.data.distance)})).catch((function(t){console.log(t)}))}},mounted:function(){this.token=localStorage.getItem("jwt"),this.userId=localStorage.getItem("userId"),this.token||this.$router.push("/"),this.getConfession()}},ht=dt,mt=(s("ad52"),Object(p["a"])(ht,ut,lt,!1,null,"7f8c4f55",null)),ft=mt.exports,gt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page"},[s("div",{staticClass:"sidebar"},[s("div",{staticClass:"block"},[s("button",{staticClass:"btn",on:{click:t.newConfession}},[t._v("Make a Confession")])])]),s("div",{staticClass:"main"},[s("h2",[t._v("Latest Confessions")]),s("div",{staticClass:"deck"},t._l(t.confessions,(function(e){return s("div",{key:e._id,staticClass:"card"},[s("div",{staticClass:"cardbody"},[s("div",{staticClass:"linkto",on:{click:function(){return t.showConfession(e._id)}}},[t._m(0,!0),s("div",{staticClass:"card-title"},[s("p",[t._v(t._s(e.subject))])])])]),s("div",{staticClass:"card-panel"},[s("div",{staticClass:"nickname"},[t._v(" "+t._s(e.creator.nickname)+" ")]),s("div",{staticClass:"reacts"},[s("div",{staticClass:"reactbox",on:{click:function(){t.heartPost(e._id)}}},[s("div",{staticClass:"love"},[s("font-awesome-icon",{attrs:{icon:"heart"}})],1),s("span",[t._v(t._s(e.totalHearts))])]),s("div",{staticClass:"reactbox",on:{click:function(){t.hatePost(e._id)}}},[s("div",{staticClass:"hate"},[s("font-awesome-icon",{attrs:{icon:"hand-middle-finger"}})],1),s("span",[t._v(t._s(e.totalHates)+" ")])])]),s("div",{staticClass:"timestamp"},[t._v(" "+t._s(t.timeAgo(e.createdAt))+" ")])])])})),0),s("div",{staticClass:"pagination"},[s("div",{staticClass:"left"},[s("div",{staticClass:"arrow",on:{click:t.prevPage}},[t._v(" <<<< ")])]),s("div",{staticClass:"right"},[s("div",{staticClass:"arrow",on:{click:t.nextPage}},[t._v(" >>>> ")])])])])])},pt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-image-container"},[s("img",{staticClass:"card-img",attrs:{src:"https://www.bigstockphoto.com/blog/wp-content/uploads/2014/01/66006-bigstock-confession-concept-42406879.jpg",alt:""}})])}],vt={data:function(){return{confessions:[],unloadable:!1,lat:"",lng:"",country:"",countryCode:"",postcode:"",state:"",suburb:"",trueLoc:!1,loadConfessions:!1,distance:50,token:"",userId:"",page:1}},methods:{nextPage:function(){this.confessions.length<8||(this.page+=1),this.getConfessions()},prevPage:function(){1==this.page?this.page=1:this.page-=1,this.getConfessions()},showConfession:function(t){this.$router.push("/confessions/show/"+t)},heartPost:function(t){var e=this;u.a.post("".concat("https://anonymous-confessions.herokuapp.com","/confessions/heartPost"),{confData:{token:localStorage.getItem("jwt"),id:t}}).then((function(){e.getConfessions()})).catch((function(t){console.log(t)}))},hatePost:function(t){var e=this;u.a.post("".concat("https://anonymous-confessions.herokuapp.com","/confessions/hatePost"),{confData:{token:localStorage.getItem("jwt"),id:t}}).then((function(){e.$socket.emit("refresh")})).catch((function(t){console.log(t)}))},newConfession:function(){localStorage.getItem("jwt")?this.$router.push("/confessions/new"):this.$router.push("/")},timeAgo:function(t){return d()(String(t)).startOf("second").fromNow()},getConfessions:function(){var t=this;u.a.post("".concat("https://anonymous-confessions.herokuapp.com","/confessions/latest"),{confData:{token:this.token,page:this.page,distance:this.distance}}).then((function(e){t.confessions=e.data.confessions})).catch((function(t){console.log(t)}))},saveTrueLoc:function(){var t=this;u.a.post("".concat("https://anonymous-confessions.herokuapp.com","/auth/saveTrueUserLoc"),{data:{token:localStorage.getItem("jwt"),lat:this.lat,lng:this.lng}}).then((function(e){t.country=e.data.user.country,t.countryCode=e.data.user.countryCode,t.suburb=e.data.user.suburb,t.state=e.data.user.state,t.postcode=e.data.user.postcode,t.trueLoc=e.data.user.trueLoc})).then((function(){t.getConfessions()})).catch((function(t){console.log(t)}))},saveRoughLoc:function(){var t=this;u.a.get("".concat(Object({NODE_ENV:"production",VUE_APP_URL_LOCAL:"http://localhost:8080",VUE_APP_URL:"https://anonymous-confessions.herokuapp.com",VUE_APP_WEBSOCKET:"wss://anonymous-confessions.herokuapp.com",VUE_APP_GEOSITE:"https://api.ipify.org",BASE_URL:"/"}).GEOSITE)).then((function(t){return t})).then((function(e){u.a.post("".concat("https://anonymous-confessions.herokuapp.com","/auth/saveRoughUserLoc"),{data:{token:localStorage.getItem("jwt"),ip:e.data.ip}}).then((function(e){t.country=e.data.user.country,t.countryCode=e.data.user.countryCode,t.suburb=e.data.user.suburb,t.state=e.data.user.state,t.lat=e.data.user.lat,t.lng=e.data.user.lng,t.trueLoc=e.data.user.trueLoc})).then((function(){t.getConfessions()})).catch((function(e){console.log(e),t.unloadable=!0}))})).catch((function(t){console.log(t)}))},messageUser:function(t){this.$router.push("/inbox/"+t)}},mounted:function(){var t=this;this.token=localStorage.getItem("jwt"),this.token||this.$router.push("/"),this.userId=localStorage.getItem("userId"),this.$socket.on("refresh",(function(){t.getConfessions()})),u.a.post("".concat("https://anonymous-confessions.herokuapp.com","/auth/getUserLoc"),{data:{token:localStorage.getItem("jwt")}}).then((function(e){if(t.lat=e.data.locInfo.lat,t.lng=e.data.locInfo.lng,t.country=e.data.locInfo.country,t.countryCode=e.data.locInfo.countryCode,t.state=e.data.locInfo.state,t.suburb=e.data.locInfo.suburb,t.trueLoc=e.data.locInfo.trueLoc,t.postcode=e.data.locInfo.postcode,""!==t.lat&&""!==t.lng&&""!==t.country&&""!=t.state&&!0===t.trueLoc)t.getConfessions();else{var s={enableHighAccuracy:!1,timeout:1/0,maximumAge:0};t.$getLocation(s).then((function(e){t.lat=e.lat,t.lng=e.lng})).then((function(){t.saveTrueLoc()})).catch((function(e){console.warn(e),t.saveRoughLoc()}))}})).catch((function(t){console.log(t)}))}},bt=vt,Ct=(s("9c2b"),Object(p["a"])(bt,gt,pt,!1,null,"9ff4a9d4",null)),_t=Ct.exports,kt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page"},[s("div",{staticClass:"sidebar"},[s("div",{staticClass:"block"},[s("button",{staticClass:"btn",on:{click:t.newConfession}},[t._v("Make a Confession")])])]),s("div",{staticClass:"main"},[s("h2",[t._v("Popular Confessions")]),s("div",{staticClass:"deck"},t._l(t.confessions,(function(e){return s("div",{key:e._id,staticClass:"card"},[s("div",{staticClass:"cardbody"},[s("div",{staticClass:"linkto",on:{click:function(){return t.showConfession(e._id)}}},[t._m(0,!0),s("div",{staticClass:"card-title"},[s("p",[t._v(t._s(e.subject))])])])]),s("div",{staticClass:"card-panel"},[s("div",{staticClass:"nickname"},[t._v(" "+t._s(e.creator.nickname)+" ")]),s("div",{staticClass:"reacts"},[s("div",{staticClass:"reactbox",on:{click:function(){t.heartPost(e._id)}}},[s("div",{staticClass:"love"},[s("font-awesome-icon",{attrs:{icon:"heart"}})],1),s("span",[t._v(t._s(e.totalHearts))])]),s("div",{staticClass:"reactbox",on:{click:function(){t.hatePost(e._id)}}},[s("div",{staticClass:"hate"},[s("font-awesome-icon",{attrs:{icon:"hand-middle-finger"}})],1),s("span",[t._v(t._s(e.totalHates)+" ")])])]),s("div",{staticClass:"timestamp"},[t._v(" "+t._s(t.timeAgo(e.createdAt))+" ")])])])})),0),s("div",{staticClass:"pagination"},[s("div",{staticClass:"left"},[s("div",{staticClass:"arrow",on:{click:t.prevPage}},[t._v(" <<<< ")])]),s("div",{staticClass:"right"},[s("div",{staticClass:"arrow",on:{click:t.nextPage}},[t._v(" >>>> ")])])])])])},wt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-image-container"},[s("img",{staticClass:"card-img",attrs:{src:"https://www.bigstockphoto.com/blog/wp-content/uploads/2014/01/66006-bigstock-confession-concept-42406879.jpg",alt:""}})])}],yt={data:function(){return{confessions:[],unloadable:!1,lat:"",lng:"",country:"",countryCode:"",postcode:"",state:"",suburb:"",trueLoc:!1,loadConfessions:!1,distance:50,token:"",userId:"",page:1}},methods:{nextPage:function(){this.confessions.length<8||(this.page+=1),this.getConfessions()},prevPage:function(){1==this.page?this.page=1:this.page-=1,this.getConfessions()},messageUser:function(t){this.$router.push("/inbox/"+t)},showConfession:function(t){this.$router.push("/confessions/show/"+t)},heartPost:function(t){var e=this;u.a.post("".concat("https://anonymous-confessions.herokuapp.com","/confessions/heartPost"),{confData:{token:localStorage.getItem("jwt"),id:t}}).then((function(){e.$socket.emit("refresh")})).catch((function(t){console.log(t)}))},hatePost:function(t){var e=this;u.a.post("".concat("https://anonymous-confessions.herokuapp.com","/confessions/hatePost"),{confData:{token:localStorage.getItem("jwt"),id:t}}).then((function(){e.$socket.emit("refresh")})).catch((function(t){console.log(t)}))},newConfession:function(){localStorage.getItem("jwt")?this.$router.push("/confessions/new"):this.$router.push("/")},timeAgo:function(t){return d()(String(t)).startOf("second").fromNow()},getConfessions:function(){var t=this;u.a.post("".concat("https://anonymous-confessions.herokuapp.com","/confessions/popular"),{confData:{token:this.token,page:this.page}}).then((function(e){t.confessions=e.data.confessions})).catch((function(t){console.log(t)}))},saveTrueLoc:function(){var t=this;u.a.post("".concat("https://anonymous-confessions.herokuapp.com","/auth/saveTrueUserLoc"),{data:{token:localStorage.getItem("jwt"),lat:this.lat,lng:this.lng}}).then((function(e){t.country=e.data.user.country,t.countryCode=e.data.user.countryCode,t.suburb=e.data.user.suburb,t.state=e.data.user.state,t.postcode=e.data.user.postcode,t.trueLoc=e.data.user.trueLoc})).then((function(){t.getConfessions()})).catch((function(t){console.log(t)}))},saveRoughLoc:function(){var t=this;u.a.get("".concat(Object({NODE_ENV:"production",VUE_APP_URL_LOCAL:"http://localhost:8080",VUE_APP_URL:"https://anonymous-confessions.herokuapp.com",VUE_APP_WEBSOCKET:"wss://anonymous-confessions.herokuapp.com",VUE_APP_GEOSITE:"https://api.ipify.org",BASE_URL:"/"}).GEOSITE)).then((function(t){return t})).then((function(e){u.a.post("".concat("https://anonymous-confessions.herokuapp.com","/auth/saveRoughUserLoc"),{data:{token:localStorage.getItem("jwt"),ip:e.data.ip}}).then((function(e){t.country=e.data.user.country,t.countryCode=e.data.user.countryCode,t.suburb=e.data.user.suburb,t.state=e.data.user.state,t.lat=e.data.user.lat,t.lng=e.data.user.lng,t.trueLoc=e.data.user.trueLoc})).then((function(){t.getConfessions()})).catch((function(e){console.log(e),t.unloadable=!0}))})).catch((function(t){console.log(t)}))}},mounted:function(){var t=this;this.token=localStorage.getItem("jwt"),this.token||this.$router.push("/"),this.userId=localStorage.getItem("userId"),this.$socket.on("refresh",(function(){t.getConfessions()})),u.a.post("".concat("https://anonymous-confessions.herokuapp.com","/auth/getUserLoc"),{data:{token:localStorage.getItem("jwt")}}).then((function(e){if(t.lat=e.data.locInfo.lat,t.lng=e.data.locInfo.lng,t.country=e.data.locInfo.country,t.countryCode=e.data.locInfo.countryCode,t.state=e.data.locInfo.state,t.suburb=e.data.locInfo.suburb,t.trueLoc=e.data.locInfo.trueLoc,t.postcode=e.data.locInfo.postcode,""!==t.lat&&""!==t.lng&&""!==t.country&&""!=t.state&&!0===t.trueLoc)t.getConfessions();else{var s={enableHighAccuracy:!1,timeout:1/0,maximumAge:0};t.$getLocation(s).then((function(e){t.lat=e.lat,t.lng=e.lng})).then((function(){t.saveTrueLoc()})).catch((function(e){console.warn(e),t.saveRoughLoc()}))}})).catch((function(t){console.log(t)}))}},jt=yt,$t=(s("6034"),Object(p["a"])(jt,kt,wt,!1,null,"2f55cb61",null)),It=$t.exports,Pt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page"},[s("div",{staticClass:"sidebar"},[s("div",{staticClass:"block"},[s("button",{staticClass:"btn",on:{click:t.newConfession}},[t._v("Make a Confession")])])]),s("div",{staticClass:"main"},[s("h2",[t._v("Hated Confessions")]),s("div",{staticClass:"deck"},t._l(t.confessions,(function(e){return s("div",{key:e._id,staticClass:"card"},[s("div",{staticClass:"cardbody"},[s("div",{staticClass:"linkto",on:{click:function(){return t.showConfession(e._id)}}},[t._m(0,!0),s("div",{staticClass:"card-title"},[s("p",[t._v(t._s(e.subject))])])])]),s("div",{staticClass:"card-panel"},[s("div",{staticClass:"nickname"},[t._v(" "+t._s(e.creator.nickname)+" ")]),s("div",{staticClass:"reacts"},[s("div",{staticClass:"reactbox",on:{click:function(){t.heartPost(e._id)}}},[s("div",{staticClass:"love"},[s("font-awesome-icon",{attrs:{icon:"heart"}})],1),s("span",[t._v(t._s(e.totalHearts))])]),s("div",{staticClass:"reactbox",on:{click:function(){t.hatePost(e._id)}}},[s("div",{staticClass:"hate"},[s("font-awesome-icon",{attrs:{icon:"hand-middle-finger"}})],1),s("span",[t._v(t._s(e.totalHates)+" ")])])]),s("div",{staticClass:"timestamp"},[t._v(" "+t._s(t.timeAgo(e.createdAt))+" ")])])])})),0),s("div",{staticClass:"pagination"},[s("div",{staticClass:"left"},[s("div",{staticClass:"arrow",on:{click:t.prevPage}},[t._v(" <<<< ")])]),s("div",{staticClass:"right"},[s("div",{staticClass:"arrow",on:{click:t.nextPage}},[t._v(" >>>> ")])])])])])},Dt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-image-container"},[s("img",{staticClass:"card-img",attrs:{src:"https://www.bigstockphoto.com/blog/wp-content/uploads/2014/01/66006-bigstock-confession-concept-42406879.jpg",alt:""}})])}],St={data:function(){return{confessions:[],unloadable:!1,lat:"",lng:"",country:"",countryCode:"",postcode:"",state:"",suburb:"",trueLoc:!1,loadConfessions:!1,distance:50,token:"",userId:"",page:1}},methods:{nextPage:function(){this.confessions.length<8||(this.page+=1),this.getConfessions()},prevPage:function(){1==this.page?this.page=1:this.page-=1,this.getConfessions()},messageUser:function(t){this.$router.push("/inbox/"+t)},showConfession:function(t){this.$router.push("/confessions/show/"+t)},heartPost:function(t){var e=this;u.a.post("".concat("https://anonymous-confessions.herokuapp.com","/confessions/heartPost"),{confData:{token:localStorage.getItem("jwt"),id:t}}).then((function(){e.getConfessions(),e.$socket.emit("refresh")})).catch((function(t){console.log(t)}))},hatePost:function(t){var e=this;u.a.post("".concat("https://anonymous-confessions.herokuapp.com","/confessions/hatePost"),{confData:{token:localStorage.getItem("jwt"),id:t}}).then((function(){e.getConfessions(),e.$socket.emit("refresh")})).catch((function(t){console.log(t)}))},newConfession:function(){localStorage.getItem("jwt")?this.$router.push("/confessions/new"):this.$router.push("/")},timeAgo:function(t){return d()(String(t)).startOf("second").fromNow()},getConfessions:function(){var t=this;u.a.post("".concat("https://anonymous-confessions.herokuapp.com","/confessions/hated"),{confData:{token:this.token,page:this.page,distance:this.distance}}).then((function(e){t.confessions=e.data.confessions})).catch((function(t){console.log(t)}))},saveTrueLoc:function(){var t=this;u.a.post("".concat("https://anonymous-confessions.herokuapp.com","/auth/saveTrueUserLoc"),{data:{token:localStorage.getItem("jwt"),lat:this.lat,lng:this.lng}}).then((function(e){t.country=e.data.user.country,t.countryCode=e.data.user.countryCode,t.suburb=e.data.user.suburb,t.state=e.data.user.state,t.postcode=e.data.user.postcode,t.trueLoc=e.data.user.trueLoc})).then((function(){t.getConfessions()})).catch((function(t){console.log(t)}))},saveRoughLoc:function(){var t=this;u.a.get("".concat(Object({NODE_ENV:"production",VUE_APP_URL_LOCAL:"http://localhost:8080",VUE_APP_URL:"https://anonymous-confessions.herokuapp.com",VUE_APP_WEBSOCKET:"wss://anonymous-confessions.herokuapp.com",VUE_APP_GEOSITE:"https://api.ipify.org",BASE_URL:"/"}).GEOSITE)).then((function(t){return t})).then((function(e){u.a.post("".concat("https://anonymous-confessions.herokuapp.com","/auth/saveRoughUserLoc"),{data:{token:localStorage.getItem("jwt"),ip:e.data.ip}}).then((function(e){t.country=e.data.user.country,t.countryCode=e.data.user.countryCode,t.suburb=e.data.user.suburb,t.state=e.data.user.state,t.lat=e.data.user.lat,t.lng=e.data.user.lng,t.trueLoc=e.data.user.trueLoc})).then((function(){t.getConfessions()})).catch((function(e){console.log(e),t.unloadable=!0}))})).catch((function(t){console.log(t)}))}},mounted:function(){var t=this;this.token=localStorage.getItem("jwt"),this.token||this.$router.push("/"),this.$socket.on("refresh",(function(){t.getConfessions()})),this.userId=localStorage.getItem("userId"),u.a.post("".concat("https://anonymous-confessions.herokuapp.com","/auth/getUserLoc"),{data:{token:localStorage.getItem("jwt")}}).then((function(e){if(t.lat=e.data.locInfo.lat,t.lng=e.data.locInfo.lng,t.country=e.data.locInfo.country,t.countryCode=e.data.locInfo.countryCode,t.state=e.data.locInfo.state,t.suburb=e.data.locInfo.suburb,t.trueLoc=e.data.locInfo.trueLoc,t.postcode=e.data.locInfo.postcode,""!==t.lat&&""!==t.lng&&""!==t.country&&""!=t.state&&!0===t.trueLoc)t.getConfessions();else{var s={enableHighAccuracy:!1,timeout:1/0,maximumAge:0};t.$getLocation(s).then((function(e){t.lat=e.lat,t.lng=e.lng})).then((function(){t.saveTrueLoc()})).catch((function(e){console.warn(e),t.saveRoughLoc()}))}})).catch((function(t){console.log(t)}))}},xt=St,Lt=(s("6e34"),Object(p["a"])(xt,Pt,Dt,!1,null,"43574f32",null)),Et=Lt.exports,Mt=[{path:"/",component:E},{path:"/register",component:T},{path:"/members/closest",component:B},{path:"/members/latest",component:_t},{path:"/members/popular",component:It},{path:"/members/hated",component:Et},{path:"/confessions/new",component:rt},{path:"/confessions/show/:id",component:ft},{path:"/inbox/:id",component:J},{path:"/admin/gmap",component:st}],Nt=s("ecee"),At=s("c074"),Ot=s("ad3d"),Ut=s("ebfd"),Tt=s.n(Ut),qt=s("37ea"),Ht=s.n(qt),Rt=s("6c34"),zt=s.n(Rt),Vt=s("79b5");s.d(e,"eventBus",(function(){return Bt})),a["a"].use(Vt["a"]);var Bt=new a["a"];a["a"].use(Tt.a),a["a"].use(zt.a,"".concat("wss://anonymous-confessions.herokuapp.com"),{reconnection:!1}),a["a"].use(Ht.a),Nt["c"].add(At["c"],At["g"],At["f"],At["a"],At["e"],At["b"],At["d"]),a["a"].component("font-awesome-icon",Ot["a"]),a["a"].use(j.a),a["a"].config.productionTip=!1,a["a"].use($["a"]);var Gt=new $["a"]({routes:Mt,mode:"hash"});new a["a"]({render:function(t){return t(w)},router:Gt}).$mount("#app")},6034:function(t,e,s){"use strict";var a=s("caed"),o=s.n(a);o.a},6690:function(t,e,s){},"6e34":function(t,e,s){"use strict";var a=s("a09b"),o=s.n(a);o.a},"85ec":function(t,e,s){},"86da":function(t,e,s){},"9c2b":function(t,e,s){"use strict";var a=s("a066"),o=s.n(a);o.a},"9d74":function(t,e,s){},a066:function(t,e,s){},a09b:function(t,e,s){},ad52:function(t,e,s){"use strict";var a=s("5011"),o=s.n(a);o.a},caed:function(t,e,s){},db53:function(t,e,s){"use strict";var a=s("86da"),o=s.n(a);o.a},f327:function(t,e,s){"use strict";var a=s("9d74"),o=s.n(a);o.a},f3b0:function(t,e,s){},fdaa:function(t,e,s){"use strict";var a=s("388b"),o=s.n(a);o.a},fe37:function(t,e,s){"use strict";var a=s("f3b0"),o=s.n(a);o.a}});
//# sourceMappingURL=app.028a839b.js.map